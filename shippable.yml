language: python
python:
  - "2.7"

env:
  - COVERALLS_REPO_TOKEN=bcZSpPjEqwx3oyzzFvdONvpFM6IXOcAYd

before_install:
  - sudo apt-get -y install python-pip python-dev g++ make gfortran
  - pip install --quiet --upgrade numpy cython

install:
  - python setup.py install
  - pip install --upgrade -r dev-requirements.txt

before_script:
  - mkdir -p shippable/codecoverage shippable/testresults
  - pep8 --ignore E265 intuition tests

script:
  - nosetests tests --with-coverage --cover-package=intuition --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - coverage xml -o shippable/codecoverage/coverage.xml

after_success:
  - coveralls

notifications:
  mail:
    xavier.bruhiere@gmail.com

branches:
  only:
    - master
    - develop
